#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# help
if is-help "$@"; then
	cat <<-EOF >/dev/stderr
		USAGE:
		unziptar [archive file path] [--flags...]

		FLAGS:
		Provide [--destination=...] to specify which directory the archive will be extracted to, defaults to the pwd.
		Provide [--format=...] to manually specify format, for cases where it cannot be determined from the filename.
	EOF
	exit 22 # Invalid argument
fi

("$@") || {
	stderr echo "failed with $? will try again in 10 seconds..."
	sleep 5
	until-success "$@"
}
