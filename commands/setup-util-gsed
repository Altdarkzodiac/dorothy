#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

function setup-util-gsed() (
	# install [gsed] if [sed] is not [gsed]
	if is-mac; then
		setup-util "$@" --name='GNU sed' --cli='gsed' \
			BREW='gnu-sed'
	fi

	# if [sed] is [gsed], then make sure [gsed] is available
	if command-missing gsed; then
		symlink-helper --existing="$(which sed)" --symlink="$XDG_BIN_HOME/gsed"
	fi

	# if gsed isn't being found, then you are probably using sudo
	# in which use `sudo-helper --inherit -- gsed` instead of `sudo gsed`
)

# fire if invoked standalone
if test "$0" = "${BASH_SOURCE[0]}"; then
	setup-util-gsed "$@"
fi
