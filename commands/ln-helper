#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# prompt for configuration if missing
existing="$(
	ask --required \
		--question="What is the existing path that you want to symlink elsewhere?" \
		--default="${1-}"
)"
symlink="$(
	ask --required \
		--question="What is the new path that you want to redirect?" \
		--default="${2-}"
)"

# get their absolute paths, otherwise wierd things will happen
existing="$(fs-absolute "$existing")"
symlink="$(fs-absolute "$symlink")"

# ensure their directories actually exist, otherwise wierd things will happen
mkdir -p "$(dirname "$existing")" "$(dirname "$symlink")"

# ensure the existing file actually exists, otherwise weird things will happen
if test ! -e "$existing"; then
	touch "$existing"
fi

# create the symlink
ln -sfF "$existing" "$symlink"
