#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"
source "$DOROTHY/sources/arrays.bash"
requires_array_support 'mapfile' 'empty'

# help
if is-help "$@"; then
	cat <<-EOF >/dev/stderr
		ABOUT:
		??????
	EOF
	# if test "$#" -ne 0; then
	# 	echo-style $'\n' --error="ERROR:" $'\n' --red="$(echo-lines -- "$@")" >/dev/stderr
	# fi
	return 22 # Invalid argument
fi

# prepare
mapfile -t opts < <(echo-before-separator "$@")
mapfile -t args < <(echo-after-separator "$@")

# ask with label
mapfile -t values < <(echo-paths-and-basenames "${args[@]}")
choose-option "${opts[@]}" --label -- "${values[@]}"
