#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"
source "$DOROTHY/sources/nullglob.bash"
source "$DOROTHY/sources/config.sh"
source "$DOROTHY/sources/arrays.bash"
requires_array_support 'mapfile'

# prepare
mapfile -t files < <(echo-lines "$DOROTHY/themes/"*.* "$DOROTHY/user/themes/"*.* | echo-filenames | uniq)
themes=(
	system
	"${files[@]}"
)

# ask
theme="$(choose-option --required --question='Which theme to use?' -- "${themes[@]}")"

# apply
update_dorothy_user_config 'shell.sh' -- \
	'DOROTHY_THEME' "$theme"

# log
echo-style --success='Configuration change applied, ' --notice='restart your terminal for the change to take effect.'
