#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# this is not the same as ${var@Q}, which handles single quotes differently
function act {
	local item="$1"
	if [[ "$item" != *"'"* ]]; then
		# does not contain single quotes
		printf '%s' "'$item'"
	elif [[ "$item" != *'"'* ]]; then
		# does not contain double quotes
		printf '%s' "\"$item\""
	elif [[ "$item" != *"\\'"* ]]; then
		# does not contain escaped single quotes
		printf '%s' "'${item//\'/\\\'}'"
	elif [[ "$item" != *"\\\""* ]]; then
		# does not contain escaped double quotes
		printf '%s' "\"${item//\"/\\\"}\""
	else
		# contains both single and double quotes
		echo-style --error="echo-quote is unable to handle single and double quotes in the same string" >/dev/stderr
		printf '%s' "$item"
		return 5 # EIO Input/output error
	fi
	if test "$#" -ne 0; then
		printf ' '
	fi
}

source "$DOROTHY/sources/stdinargs.bash"
