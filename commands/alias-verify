#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

# help
if is-help "$@"; then
	cat <<-EOF >/dev/stderr
		ABOUT:
		Prompts for path to be tested if it is a macOS alias file.
	EOF
	return 22 # Invalid argument
fi

# inputs
path="$(
	ask --required \
		--question="Enter the path to test if it is a macOS alias file." \
		--default="${1-}"
)"

# act
silent-stderr osascript <<-EOF
	tell application "Finder"
		set theItem to (POSIX file "$path") as alias
		if the kind of theItem is "alias" then
			get the posix path of ((theItem) as text)
		end if
	end tell
EOF
