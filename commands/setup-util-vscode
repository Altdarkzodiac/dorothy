#!/usr/bin/env bash
source "$DOROTHY/sources/strict.bash"

function setup-util-vscode() (
	if is-linux; then
		# https://docs.microsoft.com/en-us/visualstudio/liveshare/reference/linux#install-linux-prerequisites
		setup-util "$@" NAME='VSCode Linux Dependencies' \
			INSTALLER='https://aka.ms/vsls-linux-prereq-script'
	fi

	setup-util "$@" NAME='Visual Studio Code' CLI=code \
		AUR='visual-studio-code-bin' \
		CASK='visual-studio-code' \
		FLATPAK='com.visualstudio.code' \
		NIX='vscode' \
		SNAP_CLASSIC='yes' \
		SNAP='code' \
		-- aur cask flatpak nix snap

	# flatpak does not get access to fonts, not liveshare dependencies
)

# fire if invoked standalone
if test "$0" = "${BASH_SOURCE[0]}"; then
	setup-util-vscode "$@"
fi
