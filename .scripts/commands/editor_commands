#!/usr/bin/env bash

function _set {
	export $1="$2"  # here so EDITOR $TERMINAL_EDITOR_PROMPT works
	echo "var_set $1 \"$2\";"  # ; needed for fish
}

# Set the editor configuration
_set LC_CTYPE 'en_US.UTF-8'

if command_exists micro; then
	_set TERMINAL_EDITOR 'micro'
	_set TERMINAL_EDITOR_PROMPT 'micro'
elif command_exists nano; then
	_set TERMINAL_EDITOR 'nano'
	_set TERMINAL_EDITOR_PROMPT 'nano'
elif command_exists vim; then
	_set TERMINAL_EDITOR 'vim'
	_set TERMINAL_EDITOR_PROMPT 'vim' # --noplugin -c "set nowrap"'
fi

if command_exists code; then
	_set GUI_EDITOR 'code'
	_set GUI_EDITOR_PROMPT 'code -w'
elif command_exists atom; then
	_set GUI_EDITOR 'atom'
	_set GUI_EDITOR_PROMPT 'atom -w'
elif command_exists subl; then
	_set GUI_EDITOR 'subl'
	_set GUI_EDITOR_PROMPT 'subl -w'
elif command_exists gedit; then
	_set GUI_EDITOR 'gedit'
	_set GUI_EDITOR_PROMPT 'gedit'
fi

# Always use terminal editor for prompts
# as GUI editors are too slow
_set EDITOR "$TERMINAL_EDITOR_PROMPT"
