#!/usr/bin/env bash

if is_empty_string "$1"; then
	echo "USAGE: usesh <shell>"
	exit 1
fi

set -e
export shell; shell=$(which $1)

echo "adding $shell to the standard shells"
# needed to prevent
# chpass: /Users/balupton/.homebrew/bin/fish: non-standard shell
echo "$shell" | sudo tee -a /etc/shells

echo "setting $shell as your login shell"
# chsh is identical to chpass
chpass -u "$USER" -s "$shell"
