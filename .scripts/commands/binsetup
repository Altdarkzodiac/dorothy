#!/usr/bin/env bash

function binsetup {
	local app

	# Prepare
	mkdir -p "$HOME/bin"

	# Atom
	app=$(getapp Atom.app)
	if is_dir "$app"; then
		if command_missing atom; then
			ln -s "$app/Contents/Resources/app/atom.sh" "$HOME/bin/atom"
			ln -s "$app/Contents/Resources/app/apm/bin/apm" "$HOME/bin/apm"
			editorinit
		fi
	fi

	# Visual Studio Code
	app=$(getapp Visual Studio Code.app)
	if is_dir "$app"; then
		if command_missing code; then
			ln -s "$app/Contents/Resources/app/bin/code" "$HOME/bin/code"
			editorinit
		fi
	fi

	# GitHub
	app=$(getapp GitHub.app)
	if is_dir "$app"; then
		if command_missing github; then
			ln -s "$app/Contents/MacOS/github_cli" "$HOME/bin/github"
		fi
	fi

	# Git Scan
	if command_missing "git-scan"; then
		curl -LsS "https://download.civicrm.org/git-scan/git-scan.phar" -o "$HOME/bin/git-scan"
		chmod +x "$HOME/bin/git-scan"
	fi
}

binsetup