#!/usr/bin/env bash

set -e

if command_exists brew; then
   echo "brew already installed"
else
   echo "installing brew locally..."
   # https://github.com/Homebrew/brew/blob/master/docs/Installation.md#untar-anywhere
   mkdir -p "$HOME/.homebrew"
   curl -L https://github.com/Homebrew/brew/tarball/master | tar xz --strip 1 -C "$HOME/.homebrew"
   paths_init
fi

echo "initialising cask..."
brew tap caskroom/cask
brew tap caskroom/fonts

echo "updating brew..."
brew update
brew upgrade
brew cleanup
brew cask cleanup
paths_init

echo "installing brew apps..."
brew install aria2 bash bash-completion heroku hub fish git git-extras gpg python mas micro rmtrash ruby shellcheck tmux tree wget watchman vim zsh
paths_init

echo "install cask apps..."
brew cask install airparrot appzapper atom bartender brave calibre contexts devdocs firefox freedom geekbench github-desktop kodi opera plex-media-server screenflow skype spotify spotifree teamviewer torbrowser tower transmission tunnelbear typora usage visual-studio-code vlc
# as needed
# brew cask install burn caption ccleaner jaikoz pomello toggldesktop reflector sketch vmware-fusion xld

paths_init